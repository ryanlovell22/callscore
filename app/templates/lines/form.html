{% extends "base.html" %}
{% block title %}{{ 'Edit' if line else 'Add' }} Tracking Line — CallScore{% endblock %}

{% block content %}
<h2>{{ 'Edit' if line else 'Add' }} Tracking Line</h2>

<article style="max-width: 600px;">
    <form method="post">
        <label for="label">Label</label>
        <input type="text" id="label" name="label" value="{{ line.label if line else '' }}" placeholder="e.g. Locksmith Adelaide" required>

        <label for="twilio_phone_number">Twilio Phone Number</label>
        <input type="tel" id="twilio_phone_number" name="twilio_phone_number"
               value="{{ line.twilio_phone_number if line else '' }}" placeholder="+61412345678">

        <label for="partner_name">Partner Name</label>
        <input type="text" id="partner_name" name="partner_name"
               value="{{ line.partner_name if line else '' }}" placeholder="e.g. John's Locksmith">

        <label for="partner_phone">Partner Phone</label>
        <input type="tel" id="partner_phone" name="partner_phone"
               value="{{ line.partner_phone if line else '' }}" placeholder="+61412345678">

        <label for="cost_per_lead">Cost per Lead ($)</label>
        <input type="number" id="cost_per_lead" name="cost_per_lead" step="0.01" min="0"
               value="{{ line.cost_per_lead if line else '50.00' }}">

        <label for="partner_id">Assigned Partner</label>
        <select id="partner_id" name="partner_id">
            <option value="">— None —</option>
            {% for p in partners %}
            <option value="{{ p.id }}" {% if line and line.partner_id == p.id %}selected{% endif %}>{{ p.name }} ({{ p.email }})</option>
            {% endfor %}
        </select>

        {% if line %}
        <label>
            <input type="checkbox" name="active" {% if line.active %}checked{% endif %}>
            Active
        </label>
        {% endif %}

        <button type="submit">{{ 'Save' if line else 'Add Line' }}</button>
        <a href="{{ url_for('lines.index') }}" role="button" class="outline">Cancel</a>
    </form>
</article>
{% endblock %}
